# 스마트스토어 AI 자동화 시스템 기획서

---

## 1. 프로젝트 개요

### 1.1 목적
AI가 네이버 스마트스토어의 검색광고와 상품 정보를 지속적으로 A/B 테스트하고, 성과 데이터를 기반으로 자동 최적화하는 시스템 구축

### 1.2 핵심 가치
- **자동화**: 사람의 개입 없이 AI가 매일 성과 분석 및 최적화 실행
- **데이터 기반 의사결정**: 감이 아닌 실제 성과 수치로 판단
- **지속적 개선**: 테스트 → 측정 → 적용의 무한 반복

### 1.3 사용 대상
회사 내부 스마트스토어 운영팀

---

## 2. 시스템 구성

### 2.1 기술 스택

| 구성요소 | 기술 | 역할 |
|---------|------|------|
| 스케줄러 | GitHub Actions | 매일 자동 실행 (새벽 6시) |
| 데이터베이스 | Neon (PostgreSQL) | 모든 데이터 저장 |
| AI 엔진 | Claude API | 분석 및 의사결정 |
| 네이버 연동 | 커머스 API | 상품 관리, 주문/매출 데이터 |
| 네이버 연동 | 검색광고 API | 광고 키워드 관리, 성과 데이터 |
| 클라이언트 | Electron | 대시보드 및 수동 관리 |
| 알림 | Slack | 일일 리포트 발송 |

### 2.2 시스템 아키텍처

```
┌─────────────────────────────────────────────────────────────┐
│                    GitHub Actions (매일)                     │
├─────────────────────────────────────────────────────────────┤
│  1. 데이터 수집                                              │
│     ├── 검색광고 API → 키워드 성과                           │
│     ├── 검색광고 API → 연관 키워드 후보                       │
│     └── 커머스 API → 상품/주문/매출                          │
│                                                             │
│  2. AI 분석 (Claude API)                                    │
│     ├── 광고 키워드 분석 → 액션 리스트                        │
│     └── 상품 정보 분석 → 액션 리스트                          │
│                                                             │
│  3. 자동 실행                                                │
│     ├── 검색광고 API → 키워드 등록/수정/OFF                   │
│     └── 커머스 API → 상품명/태그 수정                         │
│                                                             │
│  4. 기록 및 알림                                             │
│     ├── Neon DB → 모든 결정/결과 저장                        │
│     └── Slack → 일일 리포트 발송                             │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                      Neon PostgreSQL                         │
│  광고 데이터 | 상품 데이터 | AI 결정 로그 | 설정값            │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                      Electron 앱                             │
│  대시보드 | AI 히스토리 | 설정 관리 | 수동 개입               │
└─────────────────────────────────────────────────────────────┘
```

---

## 3. 광고 최적화 기능

### 3.1 개요
상품별로 최대 N개의 광고 키워드를 운영하며, AI가 자동으로 저성과 키워드를 탈락시키고 새로운 키워드를 테스트

### 3.2 성과 평가 지표

#### 1차 필터 (필수 조건)
- **ROAS 100% 이상**: 광고비 대비 매출이 100% 미만(적자)이면 탈락

#### 2차 평가 (종합 점수)
ROAS 통과 키워드들을 아래 우선순위로 종합 평가:

| 우선순위 | 지표 | 설명 |
|---------|------|------|
| 1 (최고) | 전환율 | 클릭 대비 구매 비율 |
| 2 | 클릭률 (CTR) | 노출 대비 클릭 비율 |
| 3 | 노출수 | 광고가 노출된 횟수 |
| 4 | 평균 클릭 비용 | 클릭당 평균 비용 (낮을수록 좋음) |
| 5 (최저) | 입찰가 | 설정된 입찰 금액 |

### 3.3 탈락 규칙

```
[키워드 탈락 판정 흐름]

1. ROAS 100% 이하?
   └── YES → 탈락 대상 (단, 테스트 기간 중이면 보호)

2. 테스트 기간 14일 경과?
   └── NO → 보호 (탈락 면제)

3. 상품당 키워드 N개 초과?
   └── YES → 종합 점수 최하위 탈락
```

### 3.4 테스트 기간 보호
- 신규 등록 키워드는 **14일간 탈락 면제**
- 적자(ROAS 100% 이하)여도 14일까지는 유지
- 사용자가 원하면 **조기 탈락 가능** (수동 개입)

### 3.5 키워드 발굴 (AI 자동)

```
[AI 키워드 발굴 프로세스]

1. 현재 상품 정보 분석
   └── 상품명, 태그, 카테고리 키워드 추출

2. 검색광고 API 연관 키워드 조회
   └── 월간 검색량, 경쟁강도 수집

3. AI 필터링
   ├── 검색량 대비 경쟁강도 낮은 키워드 우선
   ├── 이미 테스트한 키워드 제외
   └── 현재 운영 중인 키워드 제외

4. 가능성 순 랭킹 후 등록
```

---

## 4. 상품 최적화 기능

### 4.1 개요
상품명, 태그, 카테고리, 상품속성 등을 A/B 테스트하여 검색 노출 및 전환율 개선

### 4.2 검색 로직 인식 요소

네이버 일반상품(비카탈로그) 검색에 영향을 주는 요소:

| 요소 | 검색 인식 조건 | AI 테스트 대상 |
|-----|--------------|---------------|
| 상품명 | 포함된 키워드로 검색 노출 | ✅ |
| 스토어명 | 포함된 키워드로 검색 노출 | ❌ (전체 영향) |
| 브랜드 | 자동완성 선택 필수 (코드 필요) | ⚠️ |
| 제조사 | 자동완성 선택 필수 | ⚠️ |
| 카테고리명 | 해당 카테고리 검색 시 노출 | ✅ |
| 상품속성 | 속성값으로 검색 노출 | ✅ |
| 태그 | 자동완성 선택 필수 (코드 필요) | ✅ |

**중요**: 태그/브랜드/제조사는 직접 입력 불가, 반드시 **추천 태그 검색 API**로 코드 조회 후 등록

### 4.3 성과 평가 지표

| 우선순위 | 지표 | 설명 |
|---------|------|------|
| 1 (최고) | 전환율 | 유입 대비 구매 비율 |
| 2 | 클릭률 | 검색 노출 대비 클릭 비율 |

### 4.4 A/B 테스트 흐름

```
[상품 A/B 테스트 프로세스]

1. AI가 테스트 제안
   예: 상품명 "여성 14K 금반지" → "여성 14K 데일리 금반지"

2. A안 (현재) vs B안 (변경) 동시 측정
   └── 기간: 14일

3. 승자 판정
   ├── 전환율 우선 비교
   └── 전환율 동일 시 클릭률 비교

4. 승자 확정 적용 → 다음 테스트 시작
```

---

## 5. 사용자 설정

### 5.1 조정 가능 항목

| 설정 | 기본값 | 설명 |
|-----|-------|------|
| 상품당 최대 키워드 수 | 5개 | 운영할 광고 키워드 개수 |
| 테스트 보호 기간 | 14일 | 신규 키워드 탈락 면제 기간 |
| ROAS 탈락 기준 | 100% | 이 수치 이하면 탈락 대상 |

### 5.2 보호 설정
- 특정 키워드를 **보호 목록**에 추가하면 AI가 건드리지 않음
- 특정 상품을 **테스트 제외**로 설정 가능

---

## 6. 수동 개입 기능

### 6.1 Electron 앱에서 가능한 조작

**광고 관련:**
- 테스트 중인 키워드 조기 탈락
- 탈락된 키워드 복구/재시작
- 키워드 보호 설정 (AI 제외)
- 직접 키워드 추가
- 입찰가 직접 수정

**상품 관련:**
- A/B 테스트 강제 종료
- 테스트 결과 무시하고 특정 안 적용
- 직접 상품명/태그 수정
- 상품 테스트 제외 설정

**AI 관련:**
- AI 결정 취소
- AI 판단 기준 조정

---

## 7. 알림 시스템

### 7.1 Slack 일일 리포트

매일 실행 완료 후 Slack으로 요약 발송:

```
[AI 일일 리포트 - 2024.01.15]

📢 광고 키워드
├── 탈락: 3개
│   ├── "여성반지" (상품A) - ROAS 72%
│   ├── "14K귀걸이" (상품B) - 최하위
│   └── "실버목걸이" (상품C) - ROAS 89%
├── 신규 테스트: 5개
│   ├── "데일리반지" (상품A)
│   └── ...
└── 테스트 중: 23개

📦 상품 최적화
├── 테스트 승자 확정: 1개
│   └── 상품B 상품명 B안 채택 (전환율 +0.8%)
├── 신규 테스트 시작: 2개
└── 테스트 중: 7개

💰 전일 성과 요약
├── 총 광고비: 150,000원
├── 총 매출: 420,000원
└── 평균 ROAS: 280%
```

---

## 8. 데이터 구조 (개요)

### 8.1 주요 테이블

**광고 관련:**
- `ad_keywords`: 광고 키워드 마스터
- `ad_keyword_daily_stats`: 키워드 일별 성과
- `ad_keyword_tests`: 키워드 테스트 기록
- `tested_keywords_history`: 테스트 완료 키워드 히스토리

**상품 관련:**
- `products`: 상품 마스터
- `product_daily_stats`: 상품 일별 성과
- `product_ab_tests`: 상품 A/B 테스트 기록
- `product_variants`: A/B 테스트 변형 (A안/B안)

**AI 관련:**
- `ai_decisions`: AI 의사결정 기록
- `ai_decision_results`: 결정 결과 추적

**설정:**
- `settings`: 사용자 설정값
- `protected_items`: 보호 목록

---

## 9. 일일 실행 흐름

```
[GitHub Actions - 매일 06:00 KST]

Step 1: 데이터 수집 (약 5분)
├── 검색광고 API: 키워드별 전일 성과
├── 검색광고 API: 연관 키워드 조회
├── 커머스 API: 주문/매출 데이터
└── DB 저장

Step 2: AI 분석 - 광고 (약 2분)
├── 현재 키워드 성과 + 연관 키워드 + 히스토리 → Claude
├── Claude 응답: 실행할 액션 리스트 (JSON)
└── DB에 AI 결정 기록

Step 3: AI 분석 - 상품 (약 2분)
├── 현재 상품 성과 + 테스트 현황 → Claude
├── Claude 응답: 실행할 액션 리스트 (JSON)
└── DB에 AI 결정 기록

Step 4: 실행 (약 3분)
├── 검색광고 API: 키워드 등록/수정/OFF
├── 커머스 API: 상품명/태그 수정
└── DB에 실행 결과 기록

Step 5: 알림 (약 1분)
└── Slack: 일일 리포트 발송

총 예상 소요 시간: 약 15분
```

---

## 10. API 활용 범위

### 10.1 네이버 커머스 API

| 기능 | API | 용도 |
|-----|-----|------|
| 상품 조회 | 상품 목록 조회 | 현재 상품 정보 수집 |
| 상품 수정 | 상품 수정 | 상품명/태그 A/B 테스트 |
| 태그 조회 | 추천 태그 검색 목록 조회 | 태그 자동완성 코드 획득 |
| 주문 조회 | 주문 내역 조회 | 매출/전환 데이터 수집 |
| 통계 | 데이터솔루션 API | 상품별 성과 데이터 |

**⚠️ 중요 제약사항:**
- **Rate Limit: 초당 최대 2회 호출**
- 초과 시 API 호출 일시적 중단
- Rate Limiter를 통한 호출 속도 제어 필수
- 안전 마진 적용: 실제로는 초당 1.8회로 제한

### 10.2 네이버 검색광고 API

| 기능 | API | 용도 |
|-----|-----|------|
| 키워드 조회 | AdKeyword | 현재 키워드 목록 |
| 키워드 등록 | AdKeyword (create) | 신규 키워드 테스트 |
| 키워드 수정 | AdKeyword (update) | 입찰가 조정, ON/OFF |
| 키워드 삭제 | AdKeyword (delete) | 키워드 탈락 처리 |
| 연관 키워드 | RelKwdStat | 키워드 발굴 |
| 성과 조회 | Stat / StatReport | 키워드별 성과 데이터 |
| 캠페인 관리 | Campaign | 캠페인 조회/관리 |

---

## 11. 향후 확장 고려사항

- 경쟁사 분석 기능 추가
- 시즌/이벤트 자동 대응
- 가격 최적화 테스트
- 상세페이지 A/B 테스트 연동
- 다중 스토어 지원

---

## 12. 프로젝트 일정 (예상)

| 단계 | 작업 | 예상 기간 |
|-----|------|----------|
| 1 | DB 스키마 설계 | 1일 |
| 2 | GitHub Actions 스크립트 (데이터 수집) | 2일 |
| 3 | AI 분석 모듈 (Claude 연동) | 2일 |
| 4 | 자동 실행 모듈 (API 연동) | 2일 |
| 5 | Electron 앱 (대시보드) | 3일 |
| 6 | Electron 앱 (설정/수동 개입) | 2일 |
| 7 | Slack 알림 연동 | 1일 |
| 8 | 테스트 및 디버깅 | 2일 |
| **합계** | | **약 15일** |
