# 스마트스토어 AI 자동화 시스템 기획서 v2

---

## 1. 프로젝트 개요

### 1.1 목적

AI가 네이버 스마트스토어의 **검색 노출 최적화**와 **검색광고**를 지속적으로 분석·테스트하고, 성과 데이터를 기반으로 자동 최적화하는 시스템 구축

### 1.2 핵심 가치

- **적합도 기반 최적화**: 키워드별 노출 위치(상품명/속성/태그/카테고리)를 분석하여 최적 배치
- **데이터 기반 의사결정**: 감이 아닌 API 데이터와 성과 수치로 판단
- **자동화**: AI가 매일 성과 분석 → 키워드 재배치 → 광고 최적화 실행
- **지속적 개선**: 인기도 변화에 따른 키워드 전략 자동 재조정

### 1.3 핵심 알고리즘 이해

스마트스토어 순위는 다음 공식으로 결정된다:

```
순위 점수 = 인기도 × 적합도(%) × 신뢰도(%)
```

| 인자 | 설명 | 성격 |
|------|------|------|
| **인기도** | 최근 판매량, 리뷰 수, 클릭 점수 등 | 절대 점수 (예: 5,000점) |
| **적합도** | 검색 키워드와 상품 정보의 일치도 | 퍼센티지 페널티 (0~100%) |
| **신뢰도** | SEO 준수, 배송 이행 점수 등 | 대부분 만점 (관리만 하면 100%) |

**적합도의 핵심**: 같은 키워드라도 상품명에 있으면 100%, 속성에만 있으면 50~80%, 아예 없으면 10% 등 페널티가 적용된다. 이 차이가 순위를 결정짓는 핵심 변수다.

### 1.4 적합도에 영향을 미치는 5가지 인자 (파워 순서)

```
① 상품명   ← 가장 강력 (직접 입력, 주관식)
② 스토어명 ← 전체 영향, 변경 불가
③ 카테고리 ← 자동 노출 (위험: 경쟁자 모두 같은 값)
④ 속성     ← 객관식 선택 (위험: 경쟁자 대부분 같은 값)
⑤ 태그     ← 직접 입력 (주관식, 상품명 다음으로 유리)
```

**전략적 의미**: 상품명과 태그는 셀러가 직접 선택하므로 차별화 가능. 속성과 카테고리는 대부분의 셀러가 동일한 값을 넣으므로 상위권 강자와 경쟁해야 함.

### 1.5 사용 대상

회사 내부 스마트스토어 운영팀

---

## 2. 시스템 구성

### 2.1 기술 스택

| 구성요소 | 기술 | 역할 |
|---------|------|------|
| 스케줄러 | GitHub Actions | 매일 자동 실행 (새벽 6시 KST) |
| 데이터베이스 | Neon (PostgreSQL) | 모든 데이터 저장 |
| AI 엔진 | Claude API | 분석 및 의사결정 |
| 네이버 연동 | 쇼핑 검색 API | 키워드별 상위 상품 분석 (색깔 분류) |
| 네이버 연동 | 검색광고 API | 광고 키워드 관리, 성과 데이터, 연관키워드 |
| 네이버 연동 | 커머스 API | 상품 관리, 주문/매출 데이터 |
| 네이버 연동 | 데이터랩 API | 검색 트렌드, 검색량 추이 |
| 클라이언트 | Electron | 대시보드 및 수동 관리 |
| 알림 | Slack | 일일 리포트 발송 |

### 2.2 시스템 아키텍처

```
┌──────────────────────────────────────────────────────────────────┐
│                    GitHub Actions (매일 06:00 KST)                │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│  Phase 1: 데이터 수집                                             │
│     ├── 쇼핑 검색 API → 키워드별 상위 40개 상품명 수집              │
│     ├── 검색광고 API → 키워드 성과 + 연관 키워드 후보               │
│     ├── 커머스 API → 내 상품 정보, 주문/매출                       │
│     └── 데이터랩 API → 키워드 검색량 트렌드                        │
│                                                                  │
│  Phase 2: 키워드 노출 분석 (색깔 분류 자동화)                       │
│     ├── 상위 40개 상품명에서 키워드 단어 포함 여부 분석              │
│     ├── 노출 위치 판정: 상품명전용 / 속성 / 태그 / 카테고리          │
│     └── 키워드 분류 결과 DB 저장                                   │
│                                                                  │
│  Phase 3: AI 전략 수립 (Claude API)                               │
│     ├── 현재 인기도 수준 판단 + 키워드 분류 결과 입력                │
│     ├── 상품명·태그 최적 조합 도출                                  │
│     └── 광고 키워드 분석 → 등록/수정/OFF 액션                      │
│                                                                  │
│  Phase 4: 자동 실행                                               │
│     ├── 커머스 API → 상품명/태그 수정                              │
│     └── 검색광고 API → 키워드 등록/수정/OFF                        │
│                                                                  │
│  Phase 5: 기록 및 알림                                            │
│     ├── Neon DB → 모든 결정/결과 저장                              │
│     └── Slack → 일일 리포트 발송                                   │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌──────────────────────────────────────────────────────────────────┐
│                        Neon PostgreSQL                            │
│  키워드 분류 | 광고 데이터 | 상품 데이터 | AI 결정 로그 | 설정값     │
└──────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌──────────────────────────────────────────────────────────────────┐
│                         Electron 앱                               │
│  키워드 분류표 | 대시보드 | AI 히스토리 | 설정 관리 | 수동 개입      │
└──────────────────────────────────────────────────────────────────┘
```

---

## 3. 키워드 노출 분석 (색깔 분류 자동화) — 신규

이 섹션이 시스템의 핵심 차별점이다. 기존에 수작업으로 엑셀에서 하던 "색깔 분류" 작업을 쇼핑 검색 API로 자동화한다.

### 3.1 목적

각 키워드가 네이버 쇼핑 검색 결과에서 **어떤 경로(상품명/속성/태그/카테고리)로 노출되는지** 판별하여, 내 상품의 상품명·태그에 넣을 키워드를 최적 배치하는 것.

### 3.2 분석 원리

키워드 "A B"를 검색했을 때 상위 40개 상품을 조회하면:
- **상품명에 B가 있는 비율이 95% 이상** → B는 상품명 필수 키워드 (🟡 노란색)
- **상품명에 B가 있는 비율이 50~94%** → B는 속성으로도 노출 가능 (🟢 초록색)
- **상품명에 B가 있는 비율이 20% 미만** → B는 카테고리/속성에서 자동 노출 (⚪ 회색 = 위험)
- **상품명에 B가 없는데 노출** → B는 태그로 노출 추정 (🔵 파란색)

### 3.3 쇼핑 검색 API 활용 방식

```
GET https://openapi.naver.com/v1/search/shop.json
  ?query={키워드}
  &display=40
  &sort=sim          ← 네이버 쇼핑 기본 정렬 (= 랭킹순)
```

**응답에서 사용하는 필드:**

| 필드 | 용도 |
|------|------|
| `title` | 상품명 → 키워드 단어 포함 여부 분석 |
| `brand` | 브랜드명 → 브랜드 키워드 필터링 |
| `maker` | 제조사명 → 제조사 키워드 필터링 |
| `category1~4` | 카테고리 → 카테고리 키워드 판별 |
| `mallName` | 스토어명 → 스토어명 키워드 필터링 |
| `productId` | 상품 고유 ID → 추적용 |

**⚠️ API 제약사항:**
- 쇼핑 검색 API는 최대 `display=100`, `start=1000`까지 조회 가능
- 하루 25,000회 호출 제한
- `sort=sim`이 네이버 쇼핑의 "네이버 추천순" 정렬이며, 이것이 실제 랭킹에 가장 근접

### 3.4 색깔 분류 알고리즘 상세

키워드 "A B" 검색 결과 상위 40개 상품에 대해, 수식어 단어 B의 노출 경로를 판정한다.

```
[색깔 분류 판정 흐름]

입력: 키워드 = "A B" (예: "가정용 사다리")
      분석 대상 단어 = "가정용" (대표 키워드 "사다리"를 제외한 수식어)

Step 1: 쇼핑 검색 API로 "가정용 사다리" 상위 40개 상품 조회

Step 2: 40개 상품의 title에서 "가정용" 포함 여부 카운트
        → title_match_count

Step 3: 40개 상품의 category1~4에서 "가정용" 포함 여부 카운트
        → category_match_count

Step 4: 판정 로직

  IF title_match_ratio >= 95%:
      → 🟡 상품명전용 키워드
      → 상품명에 반드시 넣어야 노출됨

  ELIF category_match_ratio >= 80%:
      → ⚪ 카테고리 키워드 (위험)
      → 대부분 카테고리에서 자동 노출
      → 인기도 낮은 초반에 절대 사용 금지

  ELIF title_match_ratio >= 50%:
      → 🟢 속성 키워드
      → 상품명에 넣으면 유리하나, 속성만으로도 노출 가능
      → 상위 강자들이 속성으로 이미 점령해 있을 가능성 높음

  ELIF title_match_ratio < 50% AND category_match_ratio < 30%:
      → 🔵 태그 키워드
      → 상품명에 없어도 태그로 노출 가능
      → 태그에 넣어서 추가 노출 확보

  ELSE:
      → 🟠 혼합 키워드
      → 추가 분석 필요 (AI 판단에 위임)
```

### 3.5 분석 실행 주기

| 상황 | 실행 주기 |
|------|----------|
| 신규 상품 등록 시 | 즉시 전체 키워드 분석 |
| 일일 정기 실행 | 인기도 변동이 큰 상품의 주요 키워드만 재분석 |
| 순위 급변 감지 시 | 해당 키워드 즉시 재분석 |
| 주간 정기 | 전체 키워드 재분석 (트렌드 변화 반영) |

### 3.6 API 호출량 예산 계산

```
예시: 상품 10개, 상품당 관리 키워드 50개 = 총 500개 키워드

일일 분석 (변동 키워드만): ~50개 × 1회 = 50 API 호출
주간 전체 분석: 500개 × 1회 = 500 API 호출
일일 평균: ~120 API 호출/일

→ 하루 25,000회 한도 대비 매우 여유
→ 키워드 100개 이하 상품은 매일 전체 분석해도 무방
```

---

## 4. 키워드 수집 및 관리

### 4.1 키워드 수집 소스

| 소스 | API | 수집 데이터 |
|------|-----|-----------|
| 검색광고 연관 키워드 | RelKwdStat | 연관 키워드 + 월간 검색량 + 경쟁강도 |
| 데이터랩 검색 트렌드 | 쇼핑인사이트 | 키워드 검색량 추이 (상대값) |
| 내 상품 정보 | 커머스 API | 현재 상품명/태그에서 키워드 추출 |

### 4.2 키워드 수집 프로세스

```
[키워드 수집 흐름]

1. 대표 키워드 입력 (예: "사다리")
   └── 검색광고 API RelKwdStat → 연관 키워드 수백 개 + 월간 검색량

2. 파생 키워드로 재검색 (예: "발판사다리", "접이식사다리")
   └── 추가 연관 키워드 수집 → 중복 제거 후 병합

3. 필터링
   ├── 내 상품에 해당하지 않는 키워드 제거 (AI 판단 + 사용자 확인)
   ├── 검색량 0인 키워드 제거
   └── 최종 관리 키워드 목록 확정

4. 색깔 분류 분석 실행 (섹션 3)
   └── 각 키워드의 노출 위치 판정 → DB 저장
```

### 4.3 키워드 분류 결과 테이블 (예시)

| 키워드 | 월간 검색량 | 분류 | 상품명 포함율 | 권장 배치 |
|--------|-----------|------|-------------|----------|
| 가정용 사다리 | 2,400 | 🟡 상품명전용 | 97% | 상품명 |
| 알루미늄 사다리 | 1,800 | 🟢 속성 | 72% | 상품명 (초반엔 주의) |
| 접이식 사다리 | 3,100 | 🟡 상품명전용 | 95% | 상품명 |
| 발판 사다리 | 800 | 🔵 태그 | 35% | 태그 |
| 사다리 | 95,000 | 🟢 속성 | - | 대표 키워드 (상품명 필수) |
| 경량 사다리 | 150 | 🟡 상품명전용 | 98% | 상품명 (초반 공략 적합) |
| 미끄럼방지 사다리 | 90 | 🔵 태그 | 22% | 태그 |

---

## 5. 상품 최적화 기능

### 5.1 개요

키워드 분류 결과를 기반으로 **상품명과 태그를 최적 조합**하여, 현재 인기도 수준에서 최대 노출·유입을 확보한다.

### 5.2 인기도 단계별 키워드 전략

이 시스템의 핵심 전략이다. 인기도에 따라 공략 가능한 키워드가 달라지므로, 현재 순위를 기준으로 키워드 배치를 자동 조정한다.

```
[인기도 단계별 전략]

■ 극초반 (대표키워드 순위 500위+)
  상품명: 🟡 상품명전용 중 검색량 1,000 이하 키워드 집중
  태그:   🔵 태그 키워드 중 검색량 낮은 것부터 배치
  목표:   세부 키워드 1페이지(40위) 진입 → 소량이라도 유입 확보
  금지:   ⚪ 카테고리 키워드, 🟢 속성 키워드 중 검색량 높은 것

■ 성장기 (대표키워드 순위 100~500위)
  상품명: 🟡 검색량 중간대(1,000~5,000) 키워드로 확장
  태그:   🔵 태그 키워드 범위 확대
  목표:   중간 키워드 1페이지 진입
  시작:   🟢 속성 키워드 일부 상품명에 추가 가능

■ 안정기 (대표키워드 순위 100위 이내)
  상품명: 검색량 높은 핵심 키워드 중심 재편
  태그:   전방위 태그 키워드 배치
  가능:   🟢 속성 키워드도 상품명에 적극 배치
  목표:   대표 키워드 1페이지 진입, 세부 키워드 상위권 유지
```

### 5.3 상품명 구성 규칙

```
[상품명 구성 원칙]

1. 네이버 상품명 SEO 가이드라인 준수 (위반 시 신뢰도 감점)
2. 50자 이내 권장
3. 대표 키워드는 반드시 포함
4. 🟡 상품명전용 키워드를 우선 배치
5. 현재 인기도 수준에 맞는 검색량대의 키워드만 포함
6. 불필요한 반복 키워드 금지
```

### 5.4 태그 배치 규칙

```
[태그 배치 원칙]

1. 🔵 태그 키워드를 우선 배치 (상품명에 넣을 필요 없는 것)
2. 🟡 상품명전용 키워드 중 상품명에 넣지 못한 나머지를 태그로 보완
3. 태그는 커머스 API의 추천 태그 검색 API로 코드 조회 후 등록 (직접 입력 불가)
4. 검색량 순으로 우선순위 부여
```

### 5.5 검색 로직 인식 요소 (커머스 API 대응)

| 요소 | 검색 인식 조건 | AI 관리 대상 | API |
|-----|--------------|-------------|-----|
| 상품명 | 포함된 키워드로 검색 노출 | ✅ 핵심 | 커머스 API 상품 수정 |
| 스토어명 | 포함된 키워드로 검색 노출 | ❌ (전체 영향, 변경 불가) | - |
| 브랜드 | 자동완성 선택 필수 (코드 필요) | ⚠️ 신중하게 | 커머스 API |
| 제조사 | 자동완성 선택 필수 | ⚠️ 신중하게 | 커머스 API |
| 카테고리명 | 해당 카테고리 검색 시 노출 | ✅ 초기 설정 | 커머스 API |
| 상품속성 | 속성값으로 검색 노출 | ✅ 초기 설정 | 커머스 API |
| 태그 | 자동완성 선택 필수 (코드 필요) | ✅ 핵심 | 추천 태그 검색 API → 커머스 API |

### 5.6 A/B 테스트 흐름

키워드 재배치 후 성과를 측정하여 효과를 검증한다.

```
[상품 A/B 테스트 프로세스]

1. AI가 키워드 분류 + 인기도 기반으로 새 상품명/태그 조합 제안
   예: 상품명 "가정용 접이식 사다리" → "가정용 경량 접이식 사다리"

2. A안 (현재) vs B안 (변경) 동시 측정
   └── 기간: 14일

3. 측정 지표 (우선순위순)
   ├── 1순위: 전환율 (유입 대비 구매)
   ├── 2순위: 총 유입수 (검색을 통한 클릭)
   └── 3순위: 노출 키워드 수 (몇 개 키워드에서 40위 안에 진입했는지)

4. 승자 판정 → 적용 → 다음 테스트
```

### 5.7 인기도 급변 시 자동 재배치 (핵심)

외부 마케팅이나 시즌 효과로 인기도가 급등하면, 즉시 키워드 전략을 재조정해야 순위를 유지할 수 있다.

```
[인기도 급변 감지 → 자동 재배치]

1. 감지: 대표키워드 순위가 전일 대비 50위 이상 상승
2. 트리거: 즉시 전체 키워드 재분석 실행
3. AI 판단: 높아진 인기도에 맞춰 공략 키워드 범위 확장
4. 실행: 상품명·태그 재배치 제안 → 승인 후 적용 (또는 자동 적용)
5. 기록: 재배치 전후 순위 변화 추적

⚠️ 핵심 원리:
  외부 마케팅으로 45위 → 7위로 올랐을 때,
  상품명·태그를 높아진 인기도에 맞게 재배치하지 않으면
  외부 유입이 빠졌을 때 순위가 다시 급락한다.
  재배치를 해두면 검색 유입이 인기도를 유지시켜 순위가 버틴다.
```

---

## 6. 광고 최적화 기능

### 6.1 개요

상품별로 최대 N개의 광고 키워드를 운영하며, AI가 자동으로 저성과 키워드를 탈락시키고 새로운 키워드를 테스트한다.

### 6.2 성과 평가 지표

**1차 필터 (필수 조건):**
- ROAS 100% 이상: 광고비 대비 매출이 100% 미만(적자)이면 탈락

**2차 평가 (종합 점수):**
ROAS 통과 키워드들을 아래 우선순위로 종합 평가:

| 우선순위 | 지표 | 설명 |
|---------|------|------|
| 1 (최고) | 전환율 | 클릭 대비 구매 비율 |
| 2 | 클릭률 (CTR) | 노출 대비 클릭 비율 |
| 3 | 노출수 | 광고가 노출된 횟수 |
| 4 | 평균 클릭 비용 | 클릭당 평균 비용 (낮을수록 좋음) |
| 5 (최저) | 입찰가 | 설정된 입찰 금액 |

### 6.3 탈락 규칙

```
[키워드 탈락 판정 흐름]

1. ROAS 100% 이하?
   └── YES → 탈락 대상 (단, 테스트 기간 중이면 보호)

2. 테스트 기간 14일 경과?
   └── NO → 보호 (탈락 면제)

3. 상품당 키워드 N개 초과?
   └── YES → 종합 점수 최하위 탈락
```

### 6.4 테스트 기간 보호

- 신규 등록 키워드는 14일간 탈락 면제
- 적자(ROAS 100% 이하)여도 14일까지는 유지
- 사용자가 원하면 조기 탈락 가능 (수동 개입)

### 6.5 키워드 발굴 (AI 자동)

```
[AI 키워드 발굴 프로세스]

1. 현재 상품 정보 분석
   └── 상품명, 태그, 카테고리 키워드 추출

2. 검색광고 API 연관 키워드 조회
   └── 월간 검색량, 경쟁강도 수집

3. 키워드 색깔 분류 결과 참조
   ├── 🟡 상품명전용 키워드 → 자연 검색으로 이미 노출 중이면 광고 불필요
   ├── 🟢 속성 키워드 → 자연 노출 약한 경우 광고로 보완
   └── ⚪ 카테고리 키워드 → 자연 노출이 불리하므로 광고가 유효할 수 있음

4. AI 필터링
   ├── 검색량 대비 경쟁강도 낮은 키워드 우선
   ├── 이미 테스트한 키워드 제외
   └── 현재 운영 중인 키워드 제외

5. 가능성 순 랭킹 후 등록
```

### 6.6 광고와 자연검색의 시너지

```
키워드 분류 결과를 광고 전략에도 활용:

🟡 상품명전용 → 자연 검색 노출이 잘 되는 키워드
                → 이미 1페이지면 광고 불필요 → 광고비 절감
                → 2페이지 밖이면 광고로 유입 확보 → 인기도 상승 → 자연 순위 상승

🟢 속성 키워드 → 자연 검색에서 경쟁 불리
                → 광고로 보완하여 해당 키워드 유입 확보

⚪ 카테고리 키워드 → 자연 검색에서 상위 진입 거의 불가
                    → 광고가 유일한 노출 수단일 수 있음
                    → ROAS 판단 하에 광고 운영
```

---

## 7. 사용자 설정

### 7.1 조정 가능 항목

| 설정 | 기본값 | 설명 |
|-----|-------|------|
| 상품당 최대 광고 키워드 수 | 5개 | 운영할 광고 키워드 개수 |
| 테스트 보호 기간 | 14일 | 신규 키워드 탈락 면제 기간 |
| ROAS 탈락 기준 | 100% | 이 수치 이하면 탈락 대상 |
| 상품명 A/B 테스트 기간 | 14일 | 상품명/태그 변경 후 측정 기간 |
| 인기도 급변 감지 임계값 | 50위 | 전일 대비 이 이상 순위 변동 시 재분석 |
| 자동 재배치 모드 | 수동승인 | 자동적용 / 수동승인 선택 |

### 7.2 보호 설정

- 특정 키워드를 **보호 목록**에 추가하면 AI가 건드리지 않음
- 특정 상품을 **테스트 제외**로 설정 가능
- 상품명 특정 단어를 **고정**하면 AI가 해당 단어를 절대 빼지 않음

---

## 8. 수동 개입 기능

### 8.1 Electron 앱에서 가능한 조작

**키워드 분류 관련:**
- 키워드 분류 결과(색깔) 수동 수정
- 키워드 분류 재분석 수동 트리거
- 불필요한 키워드 제거
- 키워드 수동 추가

**상품 최적화 관련:**
- 상품명/태그 A/B 테스트 강제 종료
- 테스트 결과 무시하고 특정 안 적용
- 직접 상품명/태그 수정
- 상품 테스트 제외 설정
- 인기도 단계 수동 오버라이드

**광고 관련:**
- 테스트 중인 키워드 조기 탈락
- 탈락된 키워드 복구/재시작
- 키워드 보호 설정 (AI 제외)
- 직접 키워드 추가
- 입찰가 직접 수정

**AI 관련:**
- AI 결정 취소
- AI 판단 기준 조정

---

## 9. 알림 시스템

### 9.1 Slack 일일 리포트

매일 실행 완료 후 Slack으로 요약 발송:

```
[AI 일일 리포트 - 2025.02.05]

🔍 키워드 분석
├── 분석 완료: 127개 키워드
├── 분류 변동: 3개
│   ├── "경량 사다리" 🟢→🟡 (상품명전용으로 변경)
│   └── "미니 사다리" 🔵→🟢 (속성 노출 증가 감지)
└── 신규 발굴: 8개 키워드 추가

📦 상품 최적화
├── 인기도 급변 감지: 1개 상품 (순위 120위→58위)
│   └── 자동 재배치 제안 대기 중 (승인 필요)
├── A/B 테스트 승자 확정: 1개
│   └── 상품B 상품명 B안 채택 (유입 +23%, 전환율 +0.8%)
├── 신규 테스트 시작: 2개
└── 테스트 중: 5개

📢 광고 키워드
├── 탈락: 3개
│   ├── "여성반지" (상품A) - ROAS 72%
│   ├── "14K귀걸이" (상품B) - 최하위
│   └── "실버목걸이" (상품C) - ROAS 89%
├── 신규 테스트: 5개
│   ├── "데일리반지" (상품A) - 🟢속성 키워드, 자연노출 약해 광고 보완
│   └── ...
└── 테스트 중: 23개

💰 전일 성과 요약
├── 총 유입: 1,247명 (자연검색 892 + 광고 355)
├── 총 매출: 420,000원
├── 총 광고비: 150,000원
└── 평균 ROAS: 280%
```

---

## 10. 데이터 구조 (개요)

### 10.1 주요 테이블

**키워드 분석 관련 (신규):**
- `keywords`: 키워드 마스터 (키워드, 월간검색량, 분류색깔, 상품명포함율 등)
- `keyword_analysis_logs`: 색깔 분류 분석 실행 이력
- `keyword_analysis_snapshots`: 분석 시점별 상위 40개 상품명 스냅샷
- `keyword_product_mapping`: 키워드 ↔ 상품 매핑 (어떤 상품의 상품명/태그에 배치했는지)

**상품 관련:**
- `products`: 상품 마스터
- `product_daily_stats`: 상품 일별 성과 (유입수, 전환율, 순위 등)
- `product_ab_tests`: 상품 A/B 테스트 기록
- `product_variants`: A/B 테스트 변형 (A안/B안 상품명·태그)
- `product_ranking_history`: 상품별 주요 키워드 순위 추적

**광고 관련:**
- `ad_keywords`: 광고 키워드 마스터
- `ad_keyword_daily_stats`: 키워드 일별 성과
- `ad_keyword_tests`: 키워드 테스트 기록
- `tested_keywords_history`: 테스트 완료 키워드 히스토리

**AI 관련:**
- `ai_decisions`: AI 의사결정 기록
- `ai_decision_results`: 결정 결과 추적

**설정:**
- `settings`: 사용자 설정값
- `protected_items`: 보호 목록

---

## 11. 일일 실행 흐름

```
[GitHub Actions - 매일 06:00 KST]

Phase 1: 데이터 수집 (약 5~8분)
├── 쇼핑 검색 API: 변동 키워드 상위 40개 상품 수집 (~50회 호출)
├── 검색광고 API: 키워드별 전일 성과
├── 검색광고 API: 연관 키워드 조회
├── 커머스 API: 내 상품 정보, 주문/매출 데이터
├── 데이터랩 API: 키워드 검색량 트렌드
└── DB 저장

Phase 2: 키워드 노출 분석 (약 2분)
├── 수집된 상위 40개 상품명에서 키워드별 포함 여부 분석
├── 색깔 분류 판정 (상품명전용/속성/태그/카테고리)
├── 이전 분석 결과와 비교 → 변동 감지
└── DB 저장

Phase 3: AI 분석 (약 3분)
├── [상품 최적화]
│   ├── 인기도 급변 감지 → 재배치 필요 여부 판단
│   ├── 키워드 분류 + 현재 인기도 → 상품명·태그 최적 조합 도출
│   └── A/B 테스트 승패 판정
├── [광고 최적화]
│   ├── 키워드 성과 분석 → 탈락/유지/신규 액션
│   └── 키워드 분류 참조 → 자연검색 시너지 판단
└── DB에 AI 결정 기록

Phase 4: 실행 (약 3분)
├── 커머스 API: 상품명/태그 수정 (승인된 건)
├── 검색광고 API: 키워드 등록/수정/OFF
└── DB에 실행 결과 기록

Phase 5: 알림 (약 1분)
└── Slack: 일일 리포트 발송

총 예상 소요 시간: 약 15~20분
```

---

## 12. API 활용 범위

### 12.1 네이버 쇼핑 검색 API (신규 추가)

| 기능 | 엔드포인트 | 용도 |
|------|-----------|------|
| 쇼핑 검색 | `/v1/search/shop.json` | 키워드별 상위 상품 조회 → 색깔 분류 분석 |

**파라미터:**

| 파라미터 | 값 | 설명 |
|---------|-----|------|
| `query` | 검색 키워드 | 분석 대상 키워드 |
| `display` | 40 | 상위 40개 (1페이지에 해당) |
| `sort` | `sim` | 네이버 추천순 (≈ 랭킹순) |
| `exclude` | `used:rental:cbshop` | 중고/렌탈/해외직구 제외 |

**응답 주요 필드:** `title`, `brand`, `maker`, `mallName`, `category1~4`, `productId`, `productType`

**제약:** 일 25,000회, `start` 최대 1000

### 12.2 네이버 커머스 API

| 기능 | API | 용도 |
|------|-----|------|
| 상품 조회 | 상품 목록 조회 | 현재 상품 정보 수집 |
| 상품 수정 | 상품 수정 | 상품명/태그 A/B 테스트 |
| 태그 조회 | 추천 태그 검색 목록 조회 | 태그 자동완성 코드 획득 |
| 주문 조회 | 주문 내역 조회 | 매출/전환 데이터 수집 |
| 통계 | 데이터솔루션 API | 상품별 성과 데이터 |

**⚠️ Rate Limit: 초당 최대 2회 호출** (안전 마진: 초당 1.8회)

### 12.3 네이버 검색광고 API

| 기능 | API | 용도 |
|------|-----|------|
| 키워드 조회 | AdKeyword | 현재 키워드 목록 |
| 키워드 등록 | AdKeyword (create) | 신규 키워드 테스트 |
| 키워드 수정 | AdKeyword (update) | 입찰가 조정, ON/OFF |
| 키워드 삭제 | AdKeyword (delete) | 키워드 탈락 처리 |
| 연관 키워드 | RelKwdStat | 키워드 발굴 + 월간 검색량 |
| 성과 조회 | Stat / StatReport | 키워드별 성과 데이터 |
| 캠페인 관리 | Campaign | 캠페인 조회/관리 |

### 12.4 네이버 데이터랩 API

| 기능 | API | 용도 |
|------|-----|------|
| 검색 트렌드 | 쇼핑인사이트 | 키워드 검색량 추이 (상대값) |

---

## 13. 향후 확장 고려사항

- 경쟁사 분석 기능 추가 (쇼핑 검색 API로 경쟁 상품 모니터링)
- 시즌/이벤트 자동 대응 (데이터랩 트렌드 기반)
- 가격 최적화 테스트
- 상세페이지 A/B 테스트 연동
- 다중 스토어 지원
- 키워드 분류 정확도 향상: 실제 네이버 쇼핑 페이지 크롤링 보완 (태그 직접 확인)

---

## 14. 프로젝트 일정 (예상)

| 단계 | 작업 | 예상 기간 |
|------|------|----------|
| 1 | DB 스키마 설계 (키워드 분석 테이블 추가) | 1일 |
| 2 | 쇼핑 검색 API 연동 + 색깔 분류 분석 모듈 | 2일 |
| 3 | GitHub Actions 스크립트 (데이터 수집) | 2일 |
| 4 | AI 분석 모듈 (Claude 연동 - 상품 최적화) | 2일 |
| 5 | AI 분석 모듈 (Claude 연동 - 광고 최적화) | 1일 |
| 6 | 자동 실행 모듈 (커머스 API + 검색광고 API) | 2일 |
| 7 | Electron 앱 (키워드 분류표 + 대시보드) | 3일 |
| 8 | Electron 앱 (설정/수동 개입) | 2일 |
| 9 | Slack 알림 연동 | 1일 |
| 10 | 테스트 및 디버깅 | 2일 |
| **합계** | | **약 18일** |

---

## 15. 기존 기획서 대비 변경 요약

| 영역 | 기존 (v1) | 변경 (v2) |
|------|----------|----------|
| **핵심 로직** | 단순 A/B 테스트 | 적합도 기반 키워드 분류 → 최적 배치 → A/B 검증 |
| **키워드 분석** | 없음 | 섹션 3 신규: 색깔 분류 자동화 (쇼핑 검색 API) |
| **상품명 전략** | 임의 변경 후 테스트 | 인기도 단계별 키워드 전략 기반 변경 |
| **태그 전략** | 임의 태그 | 색깔 분류 결과 기반 배치 (🔵 태그 키워드 우선) |
| **재배치 로직** | 없음 | 인기도 급변 시 자동 재배치 (섹션 5.7) |
| **광고 × 자연검색** | 별개 운영 | 키워드 분류로 시너지 (섹션 6.6) |
| **API 추가** | 커머스 + 검색광고 | + 쇼핑 검색 API + 데이터랩 API |
| **일정** | 15일 | 18일 (+3일: 색깔 분류 모듈) |
